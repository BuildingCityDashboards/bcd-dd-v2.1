extends ../layout
include ../component/query


block append head
        link(rel='stylesheet', href='https://unpkg.com/leaflet@1.3.1/dist/leaflet.css')
        //- link(rel='stylesheet', href='/stylesheets/lib/marker-cluster-modified.css')
        //- link(rel='stylesheet', href='/stylesheets/tools/dc-tools.css')
        //- link(rel='stylesheet', href='https://rawgit.com/k4r573n/leaflet-control-osm-geocoder/master/Control.OSMGeocoder.css')
        
        //- link(rel="stylesheet", href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css")
        //- //-link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@[VERSION]/dist/L.Control.Locate.min.css")
        //- link(rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css")
        //- link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/dc/3.0.12/dc.css')
        link(rel='stylesheet', href='/stylesheets/queries/query.css')
        link(rel='stylesheet', href='/stylesheets/queries/leaflet-map.css')
        link(rel='stylesheet', href='/stylesheets/lib/Control.OSMGeocoder.modified.css')
        //- link(rel='stylesheet', href='/stylesheets/lib/leaflet-chart-modified.css')  
        //- link(rel='stylesheet', href='https://rawgit.com/k4r573n/leaflet-control-osm-geocoder/master/Control.OSMGeocoder.css')
        //- link(rel='stylesheet', href='/stylesheets/lib/Control.OSMGeocoder.modified.css')
        script(src="/lib/d3v5/d3.js" type="text/javascript" defer)
        script(src="https://cdn.plot.ly/plotly-latest.min.js" type="text/javascript" defer)
        script(src="/lib/proj4.js" type="text/javascript" defer)
        script(src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" type="text/javascript" defer)
        script(src="/lib/Control.OSMGeocoder.modified.js" type="text/javascript" defer)  
        //- script(src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js" type="text/javascript" defer)

block navigation
    //-+navbar("navbar navbar-expand-lg navbar-dark bg-dark fixed-top","/","Dublin Dashboard","Queries")
    +bcd-navbar("bcd-navbar","/","Dublin Dashboard", "Queries")
    
block content
    +query({
        id:'query-property-prices',
        sources: [{
        link :'https://statbank.cso.ie/px/pxeirestat/Statire/SelectVarVal/Define.asp?maintable=HPM04&PLanguage=0',
        name: 'CSO'},{
        link :'https://propertypriceregister.ie/Website/NPSRA/pprweb.nsf/page/ppr-home-en',
        name: 'Property Price Regsiter'}],
        title: 'Property prices',
        description: '<p>This query combines individual records of property sales from the Residential Property Price register with CSO trend data.</p>',
        chartids: ['chart-property-price', 'map-property-price'],
        buttons: [{
        id: 'btn-postal-code',
        name: 'All property',
        type: 'dropdown'
        },{
        id: 'btn-property-price-house',
        name: 'House'
        },{
        id: 'btn-property-price-apartment',
        name: 'Apartment'
        }],
        plotoptions:{
            src: '../javascripts/queries/residential_property_price.js'
        }
    })

block append scripts
    //- script(src = '../lib/d3v355/d3.min.js' )
    //- script(src = '../javascripts/queries/residential_property_price.js' type ='module' )
